## 红黑树

红黑树是每个节点都带有颜色属性的二叉搜索树, 可以保证最坏情况下基本动态集合操作的时间复杂度为 O(lgn)

> 红黑树和AVL树类似，都是在进行插入和删除操作时通过特定操作保持二叉查找树的平衡，从而获得较高的查找性能。

### 红黑树性质

性质1. 节点是红色或黑色的。
性质2. 根节点是黑色。
性质3. 每个叶节点（NIL节点，空节点）是黑色的。
性质4. 每个红色节点的两个子节点都是黑色(等价于红色节点的父节点是黑色的), 即从每个叶子到根的所有路径上不能有两个连续的红色节点
性质5. 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

红黑树确保没有一条路径比其他路径长出二倍:
要知道为什么这些特性确保了这个结果，注意到性质4导致了路径不能有两个毗连的红色节点就足够了。
最短的可能路径都是黑色节点，最长的可能路径有交替的红色和黑色节点。
因为根据性质5所有最长的路径都有相同数目的黑色节点，这就表明了没有路径能多于任何其他路径的两倍长。

> 一棵有 n 个内部节点的红黑树的高度至少为 2lg(n+1)

### 插入

rb-insert

1. 常规 BST 插入操作, 插入红色节点
2. 第一步操作可能违反性质4, 将"矛盾"从上往下移动直到没法移动, 这时通过 "旋转" 解决矛盾 
 
